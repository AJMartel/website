{"version":3,"sources":["app.js"],"names":["angular","module","config","RestangularProvider","setDefaultHeaders","setBaseUrl","document","addEventListener","event","dropContainer","getElementById","fileInput","onchange","submit","onEnter","classList","add","onExit","remove","ondragover","ondragenter","evt","preventDefault","ondragleave","ondragend","ondrop","files","dataTransfer","BaseCtrl","$rootScope","baseUrl","location","protocol","hostname","port","getDropboxLink","redirect","type","state","clientId","host","absoluteRedirect","url","producers","shuffle","name","link","array","rand","index","length","result","Array","Math","floor","random","controller","DropboxCtrl","$scope","$stateParams","ExtensionsCtrl","freeExtensions","desc","href","window","_ext_server","types","sref","proExtensions","experimentalExtensions","FileAttacherCtrl","$state","Restangular","getUser","test","secretUrl","match","uuid","queryString","substring","indexOf","query","parseQuery","key","one","customGET","then","response","sessionStorage","setItem","user","plain","didSetUser","dropboxLink","getItem","dropboxAccessToken","request","_","merge","dropbox_token","patch","encodeURIComponent","secret_url","error","loginData","showLogin","submitLogin","go","qstr","a","substr","split","i","b","decodeURIComponent","LandingCtrl","$timeout","displayData","currentDesktopVersion","onkeydown","e","keyCode","previousScreenshot","nextScreenshot","screenshot","downloads","icon","screenshots","clickedScreenshots","item","screenshotIndex","updateScreenshot","loadNext","preloaded","Image","src","onload","hasNextScreenshot","hasPreviousScreenshot","$event","stopPropagation","ProDashboardCtrl","buildExtensions","extensions","extension_server_url","editor","jwt","id","get","catch","errorResponse","console","log","alert","infoFormData","submitInfoForm","success","ProCtrl","formData","submitEmail","email","post","status","registrationResponse","token","purchaseSubscription","loadStripe","callback","StripeCheckout","scriptTag","createElement","async","headTag","getElementsByTagName","appendChild","handler","configure","_stripe_pk","locale","bitcoin","submitSubscriptionRequest","open","description","amount","stripeToken","processing","token_type","data","message","ToolsCtrl","importEvernoteFileSelected","file","reader","FileReader","target","sndata","SNTools","convertENEXDatatoSN","downloadSNData","evernoteConversionComplete","readAsText","filter","$sce","trustAsResourceUrl","directive","restrict","scope","element","on","$apply","$stateProvider","$urlRouterProvider","$locationProvider","abstract","parent","views","templateUrl","extServer","iframeURL","params","otherwise","$injector","$location","path","html5Mode"],"mappings":"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","file":"transpiled.js","sourcesContent":["'use strict';\n\nangular.module('app.main', [\n  'ui.router',\n  'restangular'\n])\n\n.config(function (RestangularProvider) {\n  RestangularProvider.setDefaultHeaders({\"Content-Type\": \"application/json\"});\n  RestangularProvider.setBaseUrl(\"/api\");\n})\n;document.addEventListener(\"DOMContentLoaded\", function(event) {\n  var dropContainer = document.getElementById(\"drop-container\");\n  var fileInput = document.getElementById(\"file-input\");\n\n  if(fileInput) {\n    fileInput.onchange = function() {\n      document.getElementById(\"file-attacher-form\").submit();\n    };\n\n    var onEnter = function() {\n      dropContainer.classList.add('is-dragover');\n    }\n\n    var onExit = function() {\n      dropContainer.classList.remove('is-dragover');\n    }\n\n    dropContainer.ondragover = dropContainer.ondragenter = function(evt) {\n      onEnter();\n      evt.preventDefault();\n    };\n\n    dropContainer.ondragleave = dropContainer.ondragend = onExit;\n\n    dropContainer.ondrop = function(evt) {\n      onExit();\n      dropContainer.classList.add('is-uploading');\n      fileInput.files = evt.dataTransfer.files;\n      evt.preventDefault();\n    };\n  }\n\n});\n;class BaseCtrl {\n  constructor($rootScope) {\n\n    $rootScope.baseUrl = function() {\n      return location.protocol+'//'+location.hostname+(location.port ? ':'+location.port: '');\n    }\n\n    $rootScope.getDropboxLink = function(redirect, type, state) {\n      var clientId = \"7wzjlm5ap227jw7\";\n      var host = $rootScope.baseUrl();\n      var absoluteRedirect = host + \"/\" + redirect;\n      var url = \"https://www.dropbox.com/1/oauth2/authorize?client_id=\" + clientId + \"&response_type=\" + type + \"&redirect_uri=\" + absoluteRedirect;\n      if(state) {\n        url += \"&state=\" + state;\n      }\n      return url;\n    }\n\n    $rootScope.producers = shuffle([\n      {name: \"Jeff Camealy\", link: \"https://recordsetter.com/world-record/consecutive-bounces-table-tennis-ball-alternating-between-base-inside-coffee-mug/50623\"},\n      {name: \"Carl Fletcher\", link: \"http://www.carlfletcher.org/\"},\n      {name: \"Jay Zisch\", link: \"https://github.com/jz709u\"},\n      {name: \"Lev Lazinskiy\", link: \"https://levlaz.org\"},\n      {name: \"Noel Bautista\", link: \"http://codingdoodles.com/\"},\n      {name: \"Amit Shinde\", link: \"https://github.com/amtsh\"},\n      {name: \"Sergio Pantoja\", link: \"https://github.com/sergiopantoja\"},\n      {name: \"John Huang\", link: \"https://twitter.com/ymhuang0808\"},\n      {name: \"Jamie Tanna\", link: \"https://twitter.com/jamietanna\"},\n      {name: \"Phil Weber\", link: \"https://twitter.com/philweber\"},\n      {name: \"Jorge Bay\", link: \"https://twitter.com/jorgebg\"},\n      {name: \"Jason Kim\", link: \"https://twitter.com/jasoki\"},\n      {name: \"Tom Goldsmith\", link: \"https://tgoldsmith.co.uk\"},\n      {name: \"Patrick Cunningham\", link: \"https://twitter.com/ptrckcnnnghm\"}\n    ]);\n\n    function shuffle(array) {\n      var rand, index = -1,\n        length = array.length,\n        result = Array(length);\n      while (++index < length) {\n        rand = Math.floor(Math.random() * (index + 1));\n        result[index] = result[rand];\n        result[rand] = array[index];\n      }\n      return result;\n    }\n  }\n}\n\nangular.module('app.main').controller('BaseCtrl', BaseCtrl);\n;class DropboxCtrl {\n  constructor($scope, $rootScope, $stateParams) {\n\n    // DEPRACATED\n    // $scope.dropboxLink = $rootScope.getDropboxLink(\"dropbox_redirect\", \"code\");\n    //\n    // var result = $stateParams.secret_url;\n    // if(result == \"error\") {\n    //   $scope.error = result;\n    // } else {\n    //   $scope.secretUrl = result;\n    // }\n\n  }\n}\n\nangular.module('app.main').controller('DropboxCtrl', DropboxCtrl);\n;class ExtensionsCtrl {\n  constructor($scope) {\n\n    $scope.freeExtensions = [\n      {\n        name: \"Dropbox Sync\",\n        desc: \"Allows you to sync your tags and notes to Dropbox for added redundancy.\",\n        href: window._ext_server + \"/dropbox\",\n        types: [\"Standard File Extension\"]\n      },\n      {\n        name: \"File Attachments\",\n        desc: \"An extension that allows you to attach files to your notes.\",\n        sref: \"extensions.file_attacher\",\n        types: [\"Standard Notes Extension\"]\n      },\n      {\n        name: \"Simple Markdown Editor\",\n        desc: \"A simple Markdown editor with split pane preview.\",\n        sref: \"extensions.simple_markdown\",\n        types: [\"Standard Notes Extension\"]\n      },\n      {\n        name: \"Standard Journal\",\n        desc: \"A blogging extension for Standard Notes. Easily create your own personal blog from your notes.\",\n        href: \"https://github.com/standardnotes/standard-journal\",\n        types: [\"Standard Notes Extension\"]\n      }\n    ]\n\n    $scope.proExtensions = [\n      {\n        name: \"Note History\",\n        desc: \"Track changes to your notes and restore to previous versions.\",\n        sref: \"extensions.history\",\n        types: [\"Standard Notes Extension\", \"Standard File Extension\"]\n\n      },\n      {\n        name: \"Advanced Markdown Editor\",\n        desc: \"An advanced Markdown editor with live preview, editor toolbar, and split pane support.\",\n        sref: \"extensions.advanced_markdown\",\n        types: [\"Standard Notes Extension\"]\n      },\n      {\n        name: \"Code Editor\",\n        desc: \"A powerful code editor with support for over 120 programming languages.\",\n        sref: \"extensions.code_editor\",\n        types: [\"Standard Notes Extension\"]\n      }\n    ]\n\n    $scope.experimentalExtensions = [\n      {\n        name: \"Realtime Collaborative Editor\",\n        desc: \"A proof of concept collaborative text editor with end-to-end encryption.\",\n        sref: \"extensions.collab\",\n        types: [\"Standard Notes Extension\"]\n      }\n    ]\n\n  }\n}\n\nangular.module('app.main').controller('ExtensionsCtrl', ExtensionsCtrl);\n;class FileAttacherCtrl {\n  constructor($scope, $rootScope, $stateParams, $state, Restangular) {\n\n    $scope.getUser = function() {\n      var test = $scope.secretUrl.match(\"file_attacher/(.*)\\\\?\");\n      var uuid = test[1];\n\n      var queryString = $scope.secretUrl.substring($scope.secretUrl.indexOf(\"?\"), $scope.secretUrl.length);\n      var query = parseQuery(queryString);\n      var key = query[\"key\"];\n\n      Restangular.one(\"extension_users\").customGET(uuid, {key: key}).then(function(response){\n        sessionStorage.setItem(\"fa_key\", key);\n        $scope.user = response.plain();\n        $scope.didSetUser();\n      })\n    }\n\n    $scope.didSetUser = function() {\n      $scope.dropboxLink = $rootScope.getDropboxLink(\"extensions/file_attacher\", \"token\", $scope.user.uuid);\n    }\n\n    var location = window.location.href;\n    if(location.indexOf(\"access_token\") !== -1) {\n      // dropbox auth complete\n      var key = sessionStorage.getItem(\"fa_key\");\n      var queryString = location.substring(location.indexOf(\"#\"), location.length);\n      var query = parseQuery(queryString);\n      var dropboxAccessToken = query[\"access_token\"];\n      var uuid = query[\"state\"];\n\n      var request = Restangular.one(\"extension_users\", uuid);\n      _.merge(request, {dropbox_token : dropboxAccessToken, key : key});\n      request.patch().then(function(response){\n        let secretUrl = encodeURIComponent(`${$rootScope.baseUrl()}/ext/file_attacher/${uuid}?key=${key}&type=sn`);\n        window.location.href = `/extensions/file_attacher?secret_url=${secretUrl}`;\n      })\n    } else {\n      var result = $stateParams.secret_url;\n      if(result) {\n        if(result == \"error\") {\n          $scope.error = result;\n        } else {\n          $scope.secretUrl = result;\n          $scope.getUser();\n        }\n      }\n    }\n\n\n    $scope.loginData = {showLogin: false};\n\n    $scope.submitLogin = function() {\n      $state.go(\"extensions.file_attacher\", {secret_url: $scope.loginData.secretUrl});\n    }\n\n    function parseQuery(qstr) {\n        var query = {};\n        var a = (qstr[0] === '?' || qstr[0] === '#' ? qstr.substr(1) : qstr).split('&');\n        for (var i = 0; i < a.length; i++) {\n            var b = a[i].split('=');\n            query[decodeURIComponent(b[0])] = decodeURIComponent(b[1] || '');\n        }\n        return query;\n    }\n  }\n}\n\nangular.module('app.main').controller('FileAttacherCtrl', FileAttacherCtrl);\n;class LandingCtrl {\n  constructor($rootScope, $scope, $timeout) {\n\n    $scope.displayData = {};\n    let currentDesktopVersion = \"0.2.5\";\n\n    document.onkeydown = function(e) {\n      $timeout(function(){\n        if (e.keyCode == '37') {\n          $scope.previousScreenshot();\n        } else if(e.keyCode == '39') {\n          $scope.nextScreenshot();\n        } else if(e.keyCode == '27') {\n          $scope.displayData.screenshot = null;\n        }\n      })\n    }\n\n    $scope.downloads = [\n      {\n        name: \"Web\",\n        icon: \"ico-chrome.png\",\n        link: \"https://app.standardnotes.org\",\n        screenshots: [\n          \"https://s3.amazonaws.com/standard-notes/screenshots/web/jpg/1.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/web/jpg/2.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/web/jpg/3.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/web/jpg/4.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/web/jpg/5.jpg\"\n        ]\n      },\n      {\n        name: \"iOS\",\n        icon: \"ico-apple.png\",\n        link: \"https://itunes.apple.com/us/app/id1191215138?mt=8\",\n        screenshots: [\n          \"https://s3.amazonaws.com/standard-notes/screenshots/ios/1.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/ios/2.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/ios/3.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/ios/4.jpg\",\n        ]\n      },\n      {\n        name: \"Mac\",\n        icon: \"ico-apple.png\",\n        link: \"https://github.com/standardnotes/desktop/releases/download/v0.2.5/standard-notes-0.2.5-mac.zip\",\n        screenshots: [\n          \"https://s3.amazonaws.com/standard-notes/screenshots/mac/jpg/1.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/mac/jpg/2.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/mac/jpg/3.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/mac/jpg/4.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/mac/jpg/5.jpg\"\n        ]\n      },\n      {\n        name: \"Windows\",\n        icon: \"ico-windows.png\",\n        link: \"https://github.com/standardnotes/desktop/releases/download/v0.2.5/standard-notes-Setup-0.2.5.exe\",\n        screenshots: [\n          \"https://s3.amazonaws.com/standard-notes/screenshots/desktop/jpg/1.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/desktop/jpg/2.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/desktop/jpg/3.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/desktop/jpg/4.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/desktop/jpg/5.jpg\"\n        ]\n      },\n      {\n        name: \"Linux\",\n        icon: \"ico-linux.png\",\n        link: \"https://github.com/standardnotes/desktop/releases/download/v0.2.5/standard-notes-0.2.5-x86_64.AppImage\",\n        screenshots: [\n          \"https://s3.amazonaws.com/standard-notes/screenshots/desktop/jpg/1.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/desktop/jpg/2.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/desktop/jpg/3.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/desktop/jpg/4.jpg\",\n          \"https://s3.amazonaws.com/standard-notes/screenshots/desktop/jpg/5.jpg\"\n        ]\n      },\n      {\n        name: \"Android (In Development)\",\n        icon: \"ico-android.png\",\n        link: \"https://github.com/standardnotes/android\"\n      },\n    ];\n\n    $scope.clickedScreenshots = function(item) {\n      $scope.screenshots = item.screenshots;\n      $scope.screenshotIndex = 0;\n      $scope.updateScreenshot();\n\n      // preload images\n      var index = 0;\n      function loadNext() {\n        if(index >= $scope.screenshots.length) {\n          return;\n        }\n\n        var preloaded = new Image();\n        preloaded.src = $scope.screenshots[index];\n        index++;\n\n        preloaded.onload = function() {\n          loadNext();\n        };\n      }\n      loadNext();\n    }\n\n    $scope.updateScreenshot = function() {\n      $scope.displayData.screenshot = $scope.screenshots[$scope.screenshotIndex];\n    }\n\n    $scope.hasNextScreenshot = function() {\n      return $scope.screenshotIndex < $scope.screenshots.length - 1;\n    }\n\n    $scope.hasPreviousScreenshot = function() {\n      return $scope.screenshotIndex > 0;\n    }\n\n    $scope.nextScreenshot = function($event) {\n      if(!$scope.hasNextScreenshot()) {\n        return;\n      }\n\n      if($event) {\n        $event.stopPropagation();\n      }\n      $scope.screenshotIndex++;\n      $scope.updateScreenshot();\n    }\n\n    $scope.previousScreenshot = function($event) {\n      if(!$scope.hasPreviousScreenshot()) {\n        return;\n      }\n\n      if($event) {\n        $event.stopPropagation();\n      }\n      $scope.screenshotIndex--;\n      $scope.updateScreenshot();\n    }\n\n  }\n}\n\nangular.module('app.main').controller('LandingCtrl', LandingCtrl);\n;class ProDashboardCtrl {\n  constructor($rootScope, $scope, $timeout, Restangular, $stateParams, $state) {\n\n    $scope.buildExtensions = function() {\n      $scope.extensions = [\n          {\n            name: \"Note History\",\n            desc: \"Track changes to your notes and restore to previous versions.\",\n            url: $scope.user.extension_server_url + \"/revisions\"\n          },\n          {\n            name: \"Advanced Markdown Editor\",\n            desc: \"An advanced Markdown editor with live preview, editor toolbar, and split pane support.\",\n            editor: true,\n            url: $scope.user.extension_server_url + \"/editors/advanced_markdown?name=Advanced Markdown\"\n          },\n          {\n            name: \"Code Editor\",\n            desc: \"A powerful code editor with support for over 120 programming languages.\",\n            editor: true,\n            url: $scope.user.extension_server_url + \"/editors/code?name=Code\"\n          }\n      ]\n    }\n\n    if($stateParams.jwt) {\n      Restangular.one(\"pro_users.json\", $stateParams.id).get({jwt: $stateParams.jwt})\n      .then(function(response){\n        $scope.user = response.plain();\n        $scope.user.jwt = $stateParams.jwt;\n        $scope.buildExtensions();\n      })\n      .catch(function(errorResponse){\n        console.log(\"Fetch user from JWT error:\", errorResponse);\n        alert(\"Your login session has expired.\");\n        $state.go(\"extended\");\n      })\n    } else if($stateParams.user) {\n      $scope.user = $stateParams.user;\n      $scope.buildExtensions();\n    }\n\n    $scope.infoFormData = {};\n    $scope.submitInfoForm = function() {\n      $scope.infoFormData.success = false;\n      $scope.infoFormData.error = false;\n\n      var request = Restangular.one(\"pro_users\", $scope.user.id);\n      request.jwt = $scope.user.jwt;\n      _.merge(request, $scope.user);\n      request.patch().then(function(response){\n        $scope.infoFormData.success = true;\n      })\n      .catch(function(errorResponse){\n        console.log(\"Error updating info:\", errorResponse);\n        $scope.infoFormData.error = true;\n      })\n    }\n\n\n  }\n}\n\nangular.module('app.main').controller('ProDashboardCtrl', ProDashboardCtrl);\n;class ProCtrl {\n  constructor($rootScope, $scope, $timeout, Restangular, $state) {\n\n    $scope.formData = {};\n\n    $scope.submitEmail = function() {\n      var request = Restangular.one(\"pro_users\");\n      request.email = $scope.formData.email;\n      request.post().then(function(response){\n        var status = response.status;\n        if(status == \"login-email-sent\") {\n          $scope.formData.registrationResponse = \"A login link has been sent to your email address. Please follow that link to continue.\";\n        } else if(status == \"did-register\" || status == \"expired\") {\n          $scope.user = response.user;\n          $scope.user.jwt = response.token;\n          $scope.purchaseSubscription();\n        }\n      })\n      .catch(function(errorResponse){\n        console.log(\"Submit error: \", errorResponse);\n        alert(\"There was an error processing your request. Please try again.\");\n      })\n    }\n\n    function loadStripe(callback) {\n      if(window.StripeCheckout) {\n        callback();\n        return;\n      }\n\n      var scriptTag = document.createElement('script');\n      scriptTag.src = \"https://checkout.stripe.com/checkout.js\";\n      scriptTag.async = false;\n      var headTag = document.getElementsByTagName('head')[0];\n      headTag.appendChild(scriptTag);\n      scriptTag.onload = function() {\n        callback();\n      }\n    }\n\n    $scope.purchaseSubscription = function() {\n      loadStripe(function(){\n        var handler = StripeCheckout.configure({\n          key: window._stripe_pk,\n          locale: 'auto',\n          bitcoin: true,\n          token: function(token) {\n            $scope.submitSubscriptionRequest(token);\n          }\n        });\n\n        handler.open({\n          name: 'Standard Notes Extended',\n          description: 'Subscription',\n          amount: 3000\n        });\n      })\n    }\n\n    $scope.submitSubscriptionRequest = function(stripeToken) {\n      $scope.formData.processing = true;\n\n      var request = Restangular.one(\"subscriptions\");\n      request.jwt = $scope.user.jwt;\n\n      if(stripeToken) {\n       request.token = stripeToken.id;\n       request.email = stripeToken.email;\n       request.token_type = stripeToken.type;\n      }\n\n      request.post()\n      .then(function(response){\n        $scope.formData.processing = false;\n        if(!response.error) {\n          $scope.formData.success = true;\n          $timeout(function(){\n            $state.go(\"pro_dashboard\", {user: $scope.user})\n          }, 1250)\n        } else {\n          console.log(\"Subscription error:\", response.data);\n          $scope.formData.error = response.error;\n        }\n      })\n      .catch(function(response) {\n        $scope.formData.processing = false;\n        $scope.formData.error = {message: \"There was an error processing your subscription. Please try again. If you continue to see problems, please email hello@standardnotes.org.\"}\n      })\n    }\n  }\n}\n\nangular.module('app.main').controller('ProCtrl', ProCtrl);\n;class ToolsCtrl {\n  constructor($rootScope, $scope, $timeout) {\n\n    $scope.importEvernoteFileSelected = function(files) {\n      var file = files[0];\n      var reader = new FileReader();\n\n      reader.onload = function(e) {\n        var data = e.target.result;\n        try {\n          var sndata = SNTools.convertENEXDatatoSN(data);\n          SNTools.downloadSNData(sndata, \"evernote-to-sn.txt\");\n          $timeout(function(){\n            $scope.evernoteConversionComplete = true;\n          })\n        } catch (e) {\n          console.log(\"Error: \", e);\n          alert(\"There was an error processing your file. Please submit your console output to sn@bitar.io.\");\n        }\n      }\n      reader.readAsText(file);\n    }\n\n  }\n}\n\nangular.module('app.main').controller('ToolsCtrl', ToolsCtrl);\n;angular.module('app.main').filter('trusted', ['$sce', function ($sce) {\n    return function(url) {\n        return $sce.trustAsResourceUrl(url);\n    };\n}]);\n;angular\n  .module('app.main')\n  .directive('fileChange', function() {\n    return {\n     restrict: 'A',\n     scope: {\n       handler: '&'\n     },\n     link: function (scope, element) {\n      element.on('change', function (event) {\n        scope.$apply(function(){\n          scope.handler({files: event.target.files});\n        });\n      });\n     }\n    };\n});\n;//= require app/app.main.js\n//= require_tree ./controllers\n;angular.module('app.main')\n  .config(function ($stateProvider, $urlRouterProvider, $locationProvider) {\n\n    $stateProvider\n      .state('base', {\n        abstract: true,\n      })\n\n      .state('landing', {\n        url: '/',\n        parent: 'base',\n        views: {\n          'content@' : {\n            templateUrl: 'templates/landing.html',\n            controller: 'LandingCtrl'\n          }\n        }\n      })\n\n      .state('extensions', {\n        url: '/extensions',\n        views: {\n          'content@' : {\n            templateUrl: 'templates/extensions/extensions.html',\n            controller: 'ExtensionsCtrl'\n          }\n        }\n      })\n\n      // DEPRACATED\n      // .state('extensions.dropbox', {\n      //   url: '/dropbox?secret_url',\n      //   views: {\n      //     'content@' : {\n      //       templateUrl: 'templates/extensions/dropbox.html',\n      //       controller: 'DropboxCtrl'\n      //     }\n      //   }\n      // })\n\n      .state('extensions.history', {\n        url: '/revision-history',\n        views: {\n          'content@' : {\n            templateUrl: 'templates/extensions/revisions.html',\n            // controller: 'RevisionsExtCtrl'\n          }\n        }\n      })\n\n      .state('extensions.file_attacher', {\n        url: '/file_attacher?secret_url&uuid',\n        views: {\n          'content@' : {\n            templateUrl: 'templates/extensions/file_attacher.html',\n            controller: 'FileAttacherCtrl'\n          }\n        }\n      })\n\n      .state('extensions.simple_markdown', {\n        url: '/simple-markdown',\n        views: {\n          'content@' : {\n            templateUrl: 'templates/extensions/simple_markdown.html',\n            controller: function($scope){\n              $scope.extServer = window._ext_server;\n              $scope.iframeURL = window._ext_server + \"/editors/simple_markdown_demo\";\n            }\n          },\n        }\n      })\n\n      .state('extensions.advanced_markdown', {\n        url: '/advanced-markdown',\n        views: {\n          'content@' : {\n            templateUrl: 'templates/extensions/advanced_markdown.html',\n            controller: function($scope){\n              $scope.iframeURL = window._ext_server + \"/editors/advanced_markdown_demo\";\n            }\n          }\n        }\n      })\n\n      .state('extensions.code_editor', {\n        url: '/code-editor',\n        views: {\n          'content@' : {\n            templateUrl: 'templates/extensions/code_editor.html',\n            controller: function($scope){\n              $scope.iframeURL = window._ext_server + \"/editors/code_demo\";\n            }\n          }\n        }\n      })\n\n      .state('extensions.collab', {\n        url: '/collaborative-editor',\n        views: {\n          'content@' : {\n            templateUrl: 'templates/extensions/collab_editor.html'\n          }\n        }\n      })\n\n      .state('tools', {\n        url: '/tools',\n        views: {\n          'content@' : {\n            templateUrl: 'templates/tools.html',\n            controller: 'ToolsCtrl'\n          }\n        }\n      })\n\n      .state('developers', {\n        url: '/developers',\n        views: {\n          'content@' : {\n            templateUrl: 'templates/developers.html'\n          }\n        }\n      })\n\n      .state('producers', {\n        url: '/producers',\n        views: {\n          'content@' : {\n            templateUrl: 'templates/producers.html',\n            // controller: 'ProCtrl'\n          }\n        }\n      })\n\n      .state('extended', {\n        url: '/extended',\n        views: {\n          'content@' : {\n            templateUrl: 'templates/extended.html',\n            controller: 'ProCtrl'\n          }\n        }\n      })\n\n      .state('pro_dashboard', {\n        url: '/subscriber-dashboard?jwt',\n        params: {user: null},\n        views: {\n          'content@' : {\n            templateUrl: 'templates/pro_dashboard.html',\n            controller: 'ProDashboardCtrl'\n          }\n        }\n      })\n\n      // 404 Error\n      .state('404', {\n        parent: 'base',\n        views: {\n          'content@' : {\n            templateUrl: 'errors/404.html'\n          }\n        }\n      });\n\n      // Default fall back route\n      $urlRouterProvider.otherwise(function($injector, $location){\n         var state = $injector.get('$state');\n         state.go('404');\n         return $location.path();\n      });\n\n      // enable HTML5 Mode for SEO\n      $locationProvider.html5Mode(true);\n\n  });\n"]}